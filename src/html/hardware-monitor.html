<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hardware Monitor - WinTool</title>
    <!-- Include CSS directly in the file -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Base styles from styles.css */
        :root {
            /* Standard Bootstrap-like colors */
            --secondary-color: #6c757d;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --warning-color: #ffc107;
            --info-color: #17a2b8;
            --light-color: #f8f9fa;
            --dark-color: #343a40;

            /* App theme colors */
            --background-color: #111113;
            --card-background: rgba(30, 34, 40, 0.96);
            --text-color: #e1e1e6;
            --border-color: #31343a;
            --hover-color: rgba(40, 44, 50, 0.8);
            --active-color: rgba(50, 54, 60, 0.9);
            --disabled-color: #4d4d5a;
            --shadow-color: rgba(0, 0, 0, 0.2);

            /* Primary accent color - will be overridden by JS */
            --primary: #ff9800;
            --primary-dark: #cc7a00;
            --primary-faded: rgba(255, 152, 0, 0.22);
            --primary-rgb: 255, 152, 0;
        }

        body {
            font-family: Arial, Helvetica, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #111113 70%, #0a0a0c 100%);
            color: #f1f1f1;
            border-radius: 18px;
            border: none;
            box-shadow: 0 8px 40px 2px rgba(0,0,0,0.75);
            overflow: hidden;
            min-height: 100vh;
            height: 100vh;
        }

        /* Hardware monitor specific styles */
        .hardware-monitor-window {
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        .custom-titlebar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: rgba(10, 10, 12, 0.98);
            height: 32px;
            -webkit-app-region: drag;
            user-select: none;
            border-bottom: 1px solid var(--border-color);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .titlebar-drag-region {
            display: flex;
            align-items: center;
            flex-grow: 1;
            height: 100%;
        }

        .window-title {
            margin-left: 12px;
            font-size: 14px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .window-title i {
            color: var(--primary);
        }

        .window-controls {
            display: flex;
            -webkit-app-region: no-drag;
        }

        .control-button {
            width: 46px;
            height: 32px;
            background: transparent;
            border: none;
            color: var(--text-color);
            font-size: 12px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.2s ease;
        }

        .control-button:hover {
            background-color: rgba(var(--primary-rgb), 0.15);
            color: var(--primary);
        }

        .close-button:hover {
            background-color: rgba(232, 17, 35, 0.8);
            color: white;
        }

        .hardware-monitor-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .hardware-monitor-sidebar {
            width: 220px;
            background-color: rgba(20, 22, 26, 0.95);
            border-right: 1.5px solid var(--border-color);
            padding: 15px;
            overflow-y: auto;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.2);
        }

        .sidebar-section {
            margin-bottom: 20px;
        }

        .sidebar-section h3 {
            font-size: 1.1rem;
            margin-top: 0;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
            color: var(--primary);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .sidebar-section h3 i {
            color: var(--primary-dark);
        }

        .component-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .component-list li {
            padding: 10px 12px;
            margin-bottom: 8px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 1px solid transparent;
            display: flex;
            align-items: center;
        }

        .component-list li:hover {
            background-color: var(--hover-color);
            transform: translateY(-2px);
            border-color: var(--border-color);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .component-list li.active {
            background-color: rgba(var(--primary-rgb), 0.15);
            color: var(--primary);
            border-color: var(--primary);
            box-shadow: 0 0 15px rgba(var(--primary-rgb), 0.2);
        }

        .component-list li i {
            margin-right: 10px;
            width: 24px;
            height: 24px;
            text-align: center;
            color: var(--primary);
            background-color: rgba(var(--primary-rgb), 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }

        .option-item {
            margin-bottom: 15px;
            padding: 8px;
            border-radius: 8px;
            transition: background-color 0.2s;
        }

        .option-item:hover {
            background-color: rgba(40, 44, 50, 0.5);
        }

        .option-item label {
            display: block;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: #a0a0a0;
        }

        .option-item select {
            width: 100%;
            padding: 8px 10px;
            background-color: rgba(20, 22, 26, 0.8);
            color: #e0e0e0;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .option-item select:hover, .option-item select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.2);
        }

        .option-item.checkbox {
            display: flex;
            align-items: center;
        }

        .option-item.checkbox input {
            margin-right: 10px;
            accent-color: var(--primary);
        }

        .option-item.checkbox label {
            margin-bottom: 0;
            color: #e0e0e0;
        }

        .hardware-monitor-content {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
            background: linear-gradient(135deg, rgba(17, 17, 19, 0.9) 70%, rgba(10, 10, 12, 0.95) 100%);
        }

        .component-view {
            display: none;
        }

        .component-view.active {
            display: block;
        }

        .component-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .component-header h2 {
            margin: 0;
            font-size: 1.3rem;
            color: var(--primary);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .component-header h2 i {
            color: var(--primary-dark);
        }

        .component-status {
            display: flex;
            align-items: center;
            background-color: rgba(20, 22, 26, 0.7);
            padding: 6px 12px;
            border-radius: 20px;
            border: 1px solid var(--border-color);
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
            box-shadow: 0 0 8px currentColor;
        }

        .status-indicator.good {
            background-color: var(--success-color);
            box-shadow: 0 0 8px var(--success-color);
        }

        .status-indicator.warning {
            background-color: var(--warning-color);
            box-shadow: 0 0 8px var(--warning-color);
        }

        .status-indicator.critical {
            background-color: var(--danger-color);
            box-shadow: 0 0 8px var(--danger-color);
        }

        .component-details {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
            background: rgba(30, 34, 40, 0.96);
            padding: 1.2rem;
            border-radius: 12px;
            box-shadow: 0 2px 16px 0 rgba(0,0,0,0.08);
            border: 1.5px solid #31343a;
            transition: box-shadow 0.2s, border-color 0.2s;
        }

        .component-details:hover {
            box-shadow: 0 4px 20px 0 rgba(0,0,0,0.15);
            border-color: var(--primary-faded);
        }

        .detail-item {
            display: flex;
            flex-direction: column;
            padding: 0.5rem;
            border-radius: 8px;
            transition: background-color 0.2s;
        }

        .detail-item:hover {
            background-color: rgba(40, 44, 50, 0.5);
        }

        .detail-label {
            font-size: 0.85rem;
            color: #a0a0a0;
            margin-bottom: 0.25rem;
        }

        .detail-value {
            font-size: 1.1rem;
            font-weight: 500;
            color: #e0e0e0;
        }

        .metrics-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .metric-card {
            background: rgba(30, 34, 40, 0.7);
            border: 1.5px solid #31343a;
            border-radius: 12px;
            padding: 1.2rem;
            text-align: center;
            box-shadow: 0 2px 16px 0 rgba(0,0,0,0.08);
            transition: all 0.2s ease;
        }

        .metric-card:hover {
            background: rgba(40, 44, 50, 0.8);
            border-color: var(--primary);
            box-shadow: 0 0 15px rgba(var(--primary-rgb), 0.2);
            transform: translateY(-2px);
        }

        .metric-title {
            font-size: 1.1rem;
            margin-bottom: 15px;
            font-weight: 600;
            color: var(--primary);
        }

        .gauge-container {
            position: relative;
            width: 150px;
            height: 150px;
            margin: 0 auto;
        }

        .gauge-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            font-weight: bold;
            color: var(--primary);
            text-shadow: 0 0 10px rgba(var(--primary-rgb), 0.3);
        }

        .chart-container {
            background: rgba(30, 34, 40, 0.96);
            border-radius: 12px;
            padding: 1.2rem;
            height: 300px;
            box-shadow: 0 2px 16px 0 rgba(0,0,0,0.08);
            border: 1.5px solid #31343a;
            transition: box-shadow 0.2s, border-color 0.2s;
        }

        .chart-container:hover {
            box-shadow: 0 4px 20px 0 rgba(0,0,0,0.15);
            border-color: var(--primary-faded);
        }

        .loading-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 300px;
            background: rgba(30, 34, 40, 0.96);
            border-radius: 12px;
            box-shadow: 0 2px 16px 0 rgba(0,0,0,0.08);
            border: 1.5px solid #31343a;
        }

        .loading-placeholder i {
            font-size: 48px;
            margin-bottom: 15px;
            color: var(--primary);
            animation: pulse 1.5s infinite ease-in-out;
        }

        @keyframes pulse {
            0% { opacity: 0.6; transform: scale(0.95); }
            50% { opacity: 1; transform: scale(1.05); }
            100% { opacity: 0.6; transform: scale(0.95); }
        }

        .loading-placeholder p {
            font-size: 1rem;
            color: #a0a0a0;
        }

        /* Storage drive styles */
        .storage-drives {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .drive-card {
            background: rgba(30, 34, 40, 0.7);
            border: 1.5px solid #31343a;
            border-radius: 12px;
            padding: 1.2rem;
            box-shadow: 0 2px 16px 0 rgba(0,0,0,0.08);
            transition: all 0.2s ease;
        }

        .drive-card:hover {
            background: rgba(40, 44, 50, 0.8);
            border-color: var(--primary);
            box-shadow: 0 0 15px rgba(var(--primary-rgb), 0.2);
            transform: translateY(-2px);
        }

        .drive-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .drive-header h3 {
            margin: 0;
            font-size: 18px;
        }

        .drive-type {
            background-color: var(--primary);
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }

        .drive-details {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .drive-usage-bar {
            position: relative;
            height: 24px;
            background-color: var(--background-color);
            border-radius: 4px;
            overflow: hidden;
        }

        .usage-fill {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background-color: var(--primary);
            transition: width 0.5s ease;
        }

        .usage-text {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            font-weight: bold;
            text-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
        }

        .storage-performance {
            background: rgba(30, 34, 40, 0.96);
            border-radius: 12px;
            padding: 1.2rem;
            margin-top: 20px;
            box-shadow: 0 2px 16px 0 rgba(0,0,0,0.08);
            border: 1.5px solid #31343a;
            transition: box-shadow 0.2s, border-color 0.2s;
        }

        .storage-performance:hover {
            box-shadow: 0 4px 20px 0 rgba(0,0,0,0.15);
            border-color: var(--primary-faded);
        }

        .storage-performance h3 {
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.3rem;
            color: var(--primary);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .storage-performance h3 i {
            color: var(--primary-dark);
        }
    </style>
</head>
<body class="hardware-monitor-window">
    <div class="custom-titlebar">
        <div class="titlebar-drag-region">
            <div class="window-title">
                <i class="fas fa-chart-line"></i> Hardware Monitor
            </div>
        </div>
        <div class="window-controls">
            <button id="minimize-btn" class="control-button" aria-label="Minimize">
                <i class="fas fa-window-minimize"></i>
            </button>
            <button id="maximize-btn" class="control-button" aria-label="Maximize">
                <i class="fas fa-window-maximize"></i>
            </button>
            <button id="close-btn" class="control-button close-button" aria-label="Close">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <div class="hardware-monitor-container">
        <div class="hardware-monitor-sidebar">
            <div class="sidebar-section">
                <h3><i class="fas fa-cubes"></i> Components</h3>
                <ul class="component-list">
                    <li class="active" data-component="cpu">
                        <i class="fas fa-microchip"></i> CPU
                    </li>
                    <li data-component="gpu">
                        <i class="fas fa-tv"></i> GPU
                    </li>
                    <li data-component="memory">
                        <i class="fas fa-memory"></i> Memory
                    </li>
                </ul>
            </div>
            <div class="sidebar-section">
                <h3><i class="fas fa-cog"></i> Options</h3>
                <div class="option-item">
                    <label for="refresh-rate">Refresh Rate:</label>
                    <select id="refresh-rate">
                        <option value="1000">1 second</option>
                        <option value="2000" selected>2 seconds</option>
                        <option value="5000">5 seconds</option>
                        <option value="10000">10 seconds</option>
                    </select>
                </div>
                <div class="option-item">
                    <label for="chart-history">Chart History:</label>
                    <select id="chart-history">
                        <option value="30">30 seconds</option>
                        <option value="60" selected>1 minute</option>
                        <option value="300">5 minutes</option>
                        <option value="600">10 minutes</option>
                    </select>
                </div>
                <div class="option-item checkbox">
                    <input type="checkbox" id="show-alerts" checked>
                    <label for="show-alerts">Show Alerts</label>
                </div>
            </div>
        </div>

        <div class="hardware-monitor-content">
            <div class="component-view active" id="cpu-view">
                <div class="component-header">
                    <h2><i class="fas fa-microchip"></i> CPU Information</h2>
                    <div class="component-status">
                        <span class="status-indicator good"></span>
                        <span class="status-text">Good</span>
                    </div>
                </div>

                <div class="component-details">
                    <div class="detail-item">
                        <span class="detail-label">Model:</span>
                        <span class="detail-value" id="cpu-model">Loading...</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Cores:</span>
                        <span class="detail-value" id="cpu-cores">Loading...</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Threads:</span>
                        <span class="detail-value" id="cpu-threads">Loading...</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Base Speed:</span>
                        <span class="detail-value" id="cpu-base-speed">Loading...</span>
                    </div>
                </div>

                <div class="metrics-container">
                    <div class="metric-card">
                        <div class="metric-title">CPU Usage</div>
                        <div class="gauge-container">
                            <canvas id="cpu-usage-gauge"></canvas>
                            <div class="gauge-value" id="cpu-usage-value">0%</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">Temperature</div>
                        <div class="gauge-container">
                            <canvas id="cpu-temp-gauge"></canvas>
                            <div class="gauge-value" id="cpu-temp-value">0°C</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">Clock Speed</div>
                        <div class="gauge-container">
                            <canvas id="cpu-clock-gauge"></canvas>
                            <div class="gauge-value" id="cpu-clock-value">0 GHz</div>
                        </div>
                    </div>
                </div>

                <div class="chart-container">
                    <canvas id="cpu-history-chart"></canvas>
                </div>
            </div>

            <!-- Other component views would be similar but are hidden by default -->
            <div class="component-view" id="gpu-view">
                <div class="component-header">
                    <h2><i class="fas fa-tv"></i> GPU Information</h2>
                    <div class="component-status">
                        <span class="status-indicator good"></span>
                        <span class="status-text">Good</span>
                    </div>
                </div>

                <div class="component-details">
                    <div class="detail-item">
                        <span class="detail-label">Model:</span>
                        <span class="detail-value" id="gpu-model">Loading...</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">VRAM:</span>
                        <span class="detail-value" id="gpu-vram">Loading...</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Driver Version:</span>
                        <span class="detail-value" id="gpu-driver">Loading...</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Resolution:</span>
                        <span class="detail-value" id="gpu-resolution">Loading...</span>
                    </div>
                </div>

                <div class="metrics-container">
                    <div class="metric-card">
                        <div class="metric-title">GPU Usage</div>
                        <div class="gauge-container">
                            <canvas id="gpu-usage-gauge"></canvas>
                            <div class="gauge-value" id="gpu-usage-value">0%</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">Temperature</div>
                        <div class="gauge-container">
                            <canvas id="gpu-temp-gauge"></canvas>
                            <div class="gauge-value" id="gpu-temp-value">0°C</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">VRAM Usage</div>
                        <div class="gauge-container">
                            <canvas id="gpu-vram-gauge"></canvas>
                            <div class="gauge-value" id="gpu-vram-value">0 GB</div>
                        </div>
                    </div>
                </div>

                <div class="chart-container">
                    <canvas id="gpu-history-chart"></canvas>
                </div>
            </div>

            <div class="component-view" id="memory-view">
                <div class="component-header">
                    <h2><i class="fas fa-memory"></i> Memory Information</h2>
                    <div class="component-status">
                        <span class="status-indicator good"></span>
                        <span class="status-text">Good</span>
                    </div>
                </div>

                <div class="component-details">
                    <div class="detail-item">
                        <span class="detail-label">Total Memory:</span>
                        <span class="detail-value" id="memory-total">Loading...</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Memory Type:</span>
                        <span class="detail-value" id="memory-type">Loading...</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Memory Speed:</span>
                        <span class="detail-value" id="memory-speed">Loading...</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Memory Slots:</span>
                        <span class="detail-value" id="memory-slots">Loading...</span>
                    </div>
                </div>

                <div class="metrics-container">
                    <div class="metric-card">
                        <div class="metric-title">Memory Usage</div>
                        <div class="gauge-container">
                            <canvas id="memory-usage-gauge"></canvas>
                            <div class="gauge-value" id="memory-usage-value">0%</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">Used Memory</div>
                        <div class="gauge-container">
                            <canvas id="memory-used-gauge"></canvas>
                            <div class="gauge-value" id="memory-used-value">0 GB</div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-title">Available Memory</div>
                        <div class="gauge-container">
                            <canvas id="memory-available-gauge"></canvas>
                            <div class="gauge-value" id="memory-available-value">0 GB</div>
                        </div>
                    </div>
                </div>

                <div class="chart-container">
                    <canvas id="memory-history-chart"></canvas>
                </div>
            </div>

            <!-- Storage view has been removed -->

            <!-- Network view has been removed -->
        </div>
    </div>

    <!-- Include JavaScript directly in the file -->
    <script>
        // Wait for the DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            // Apply accent color from localStorage
            function applyAccentColor() {
                let color = localStorage.getItem('accentColor') || '#ff9800';
                document.documentElement.style.setProperty('--primary', color);

                // Derive --primary-dark and --primary-faded
                try {
                    // Simple shade: darken by 30%
                    function darken(hex, amt) {
                        let n = parseInt(hex.replace('#', ''), 16);
                        let r = Math.max(((n >> 16) & 0xff) - amt, 0);
                        let g = Math.max(((n >> 8) & 0xff) - amt, 0);
                        let b = Math.max((n & 0xff) - amt, 0);
                        return `#${(1 << 24 | r << 16 | g << 8 | b).toString(16).slice(1)}`;
                    }

                    let dark = darken(color, 30);
                    let faded = color.replace('#', '');
                    let rf = parseInt(faded.substring(0,2),16),
                        gf = parseInt(faded.substring(2,4),16),
                        bf = parseInt(faded.substring(4,6),16);

                    document.documentElement.style.setProperty('--primary-dark', dark);
                    document.documentElement.style.setProperty('--primary-faded', `rgba(${rf},${gf},${bf},0.22)`);
                    document.documentElement.style.setProperty('--primary-rgb', `${rf},${gf},${bf}`);
                } catch(e) {
                    console.error('Error applying accent color:', e);
                }
            }

            // Apply accent color immediately
            applyAccentColor();

            // Get references to window control buttons
            const minimizeBtn = document.getElementById('minimize-btn');
            const maximizeBtn = document.getElementById('maximize-btn');
            const closeBtn = document.getElementById('close-btn');

            // Add event listeners for window controls
            if (minimizeBtn) {
                minimizeBtn.addEventListener('click', () => {
                    window.electronAPI.minimizeWindow();
                });
            }

            if (maximizeBtn) {
                maximizeBtn.addEventListener('click', () => {
                    window.electronAPI.maximizeWindow();
                });
            }

            if (closeBtn) {
                closeBtn.addEventListener('click', () => {
                    window.electronAPI.closeWindow();
                });
            }

            // Get references to component list items
            const componentItems = document.querySelectorAll('.component-list li');
            const componentViews = document.querySelectorAll('.component-view');

            // Add event listeners for component selection
            componentItems.forEach(item => {
                item.addEventListener('click', () => {
                    // Remove active class from all items
                    componentItems.forEach(i => i.classList.remove('active'));
                    // Add active class to clicked item
                    item.classList.add('active');

                    // Hide all component views
                    componentViews.forEach(view => view.classList.remove('active'));

                    // Show the selected component view
                    const componentId = item.getAttribute('data-component');
                    const componentView = document.getElementById(`${componentId}-view`);
                    if (componentView) {
                        componentView.classList.add('active');
                    }
                });
            });

            // Helper function to create a gauge chart
            function createGaugeChart(elementId, color = '#28a745') {
                const element = document.getElementById(elementId);
                if (!element) return null;

                return new Chart(element, {
                    type: 'doughnut',
                    data: {
                        datasets: [{
                            data: [0, 100],
                            backgroundColor: [
                                color,
                                '#1e1e24'
                            ],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        cutout: '75%',
                        responsive: true,
                        maintainAspectRatio: false,
                        circumference: 180,
                        rotation: -90,
                        plugins: {
                            tooltip: {
                                enabled: false
                            },
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            }

            // Helper function to create a line chart
            function createLineChart(elementId, label, color = '#28a745') {
                const element = document.getElementById(elementId);
                if (!element) return null;

                return new Chart(element, {
                    type: 'line',
                    data: {
                        labels: Array(30).fill(''),
                        datasets: [{
                            label: label,
                            data: Array(30).fill(0),
                            borderColor: color,
                            backgroundColor: `${color}19`, // 10% opacity
                            borderWidth: 2,
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: '#6c757d'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    display: false
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                display: false
                            }
                        }
                    }
                });
            }

            // Initialize all gauge charts
            const gauges = {
                // CPU gauges
                cpuUsage: createGaugeChart('cpu-usage-gauge', getComputedStyle(document.documentElement).getPropertyValue('--success-color').trim()),
                cpuTemp: createGaugeChart('cpu-temp-gauge', getComputedStyle(document.documentElement).getPropertyValue('--danger-color').trim()),
                cpuClock: createGaugeChart('cpu-clock-gauge', getComputedStyle(document.documentElement).getPropertyValue('--primary').trim()),

                // GPU gauges
                gpuUsage: createGaugeChart('gpu-usage-gauge', getComputedStyle(document.documentElement).getPropertyValue('--success-color').trim()),
                gpuTemp: createGaugeChart('gpu-temp-gauge', getComputedStyle(document.documentElement).getPropertyValue('--danger-color').trim()),
                gpuVram: createGaugeChart('gpu-vram-gauge', getComputedStyle(document.documentElement).getPropertyValue('--primary').trim()),

                // Memory gauges
                memoryUsage: createGaugeChart('memory-usage-gauge', getComputedStyle(document.documentElement).getPropertyValue('--success-color').trim()),
                memoryUsed: createGaugeChart('memory-used-gauge', getComputedStyle(document.documentElement).getPropertyValue('--danger-color').trim()),
                memoryAvailable: createGaugeChart('memory-available-gauge', getComputedStyle(document.documentElement).getPropertyValue('--primary').trim())

                // Storage and Network gauges have been removed
            };

            // Initialize all line charts
            const charts = {
                cpuHistory: createLineChart('cpu-history-chart', 'CPU Usage', getComputedStyle(document.documentElement).getPropertyValue('--success-color').trim()),
                gpuHistory: createLineChart('gpu-history-chart', 'GPU Usage', getComputedStyle(document.documentElement).getPropertyValue('--success-color').trim()),
                memoryHistory: createLineChart('memory-history-chart', 'Memory Usage', getComputedStyle(document.documentElement).getPropertyValue('--success-color').trim())
                // Network chart has been removed
            };

            // Helper function to update gauge data
            function updateGauge(gauge, value, maxValue = 100) {
                if (!gauge) return;

                // Update the chart data
                gauge.data.datasets[0].data = [value, maxValue - value];
                gauge.update();
            }

            // Helper function to update line chart data
            function updateLineChart(chart, newValue) {
                if (!chart) return;

                // Remove the first data point and add the new one at the end
                chart.data.datasets[0].data.shift();
                chart.data.datasets[0].data.push(newValue);
                chart.update();
            }

            // Get real CPU data updates
            async function updateCPUData() {
                try {
                    // Get real CPU data from the Electron API
                    const cpuInfo = await window.electronAPI.getCpuInfo();

                    // Extract values from the real data
                    const cpuUsage = cpuInfo.load || 0;
                    const cpuTemp = cpuInfo.temperature || 0;
                    const cpuClock = cpuInfo.speed ? (cpuInfo.speed / 1000).toFixed(1) : 0; // Convert MHz to GHz

                    // Calculate clock speed gauge value (assuming range of 2-5 GHz)
                    const clockSpeedGauge = Math.min(100, Math.max(0, ((parseFloat(cpuClock) - 2) / 3) * 100));

                    // Update gauge values
                    updateGauge(gauges.cpuUsage, cpuUsage);
                    updateGauge(gauges.cpuTemp, cpuTemp, 100);
                    updateGauge(gauges.cpuClock, clockSpeedGauge, 100);

                    // Update text values
                    document.getElementById('cpu-usage-value').textContent = `${Math.round(cpuUsage)}%`;
                    document.getElementById('cpu-temp-value').textContent = `${Math.round(cpuTemp)}°C`;
                    document.getElementById('cpu-clock-value').textContent = `${cpuClock} GHz`;

                    // Update line chart
                    updateLineChart(charts.cpuHistory, cpuUsage);

                    // Update CPU model and details (only once)
                    if (document.getElementById('cpu-model').textContent === 'Loading...' && cpuInfo.model) {
                        document.getElementById('cpu-model').textContent = cpuInfo.model;
                        document.getElementById('cpu-cores').textContent = cpuInfo.cores || 'N/A';
                        document.getElementById('cpu-threads').textContent = cpuInfo.threads || 'N/A';
                        document.getElementById('cpu-base-speed').textContent = cpuInfo.speed ? `${(cpuInfo.speed / 1000).toFixed(1)} GHz` : 'N/A';
                    }
                } catch (error) {
                    console.error('Error updating CPU data:', error);
                }
            }

            // Get real GPU data updates
            async function updateGPUData() {
                try {
                    // Get real GPU data from the Electron API
                    const gpuInfo = await window.electronAPI.getGpuInfo();

                    // Extract values from the real data
                    const gpuUsage = gpuInfo.load || 0;
                    const gpuTemp = gpuInfo.temperature || 0;

                    // Calculate VRAM usage - if memory is in MB, convert to GB
                    const gpuVramTotal = gpuInfo.memory ? (gpuInfo.memory > 1000 ? (gpuInfo.memory / 1024).toFixed(1) : gpuInfo.memory) : 0;
                    // Estimate VRAM usage based on GPU load (since we might not have actual VRAM usage data)
                    const gpuVram = ((gpuVramTotal * gpuUsage) / 100).toFixed(1);
                    const gpuVramPercentage = gpuUsage; // Use GPU load as a proxy for VRAM usage percentage

                    // Update gauge values
                    updateGauge(gauges.gpuUsage, gpuUsage);
                    updateGauge(gauges.gpuTemp, gpuTemp, 100);
                    updateGauge(gauges.gpuVram, gpuVramPercentage);

                    // Update text values
                    document.getElementById('gpu-usage-value').textContent = `${Math.round(gpuUsage)}%`;
                    document.getElementById('gpu-temp-value').textContent = `${Math.round(gpuTemp)}°C`;
                    document.getElementById('gpu-vram-value').textContent = `${gpuVram} GB`;

                    // Update line chart
                    updateLineChart(charts.gpuHistory, gpuUsage);

                    // Update GPU model and details (only once)
                    if (document.getElementById('gpu-model').textContent === 'Loading...' && gpuInfo.model) {
                        document.getElementById('gpu-model').textContent = gpuInfo.model;
                        document.getElementById('gpu-vram').textContent = `${gpuVramTotal} GB`;
                        document.getElementById('gpu-driver').textContent = gpuInfo.driver || 'Unknown';

                        // We don't have resolution data from the API, so use a default or leave as is
                        if (document.getElementById('gpu-resolution').textContent === 'Loading...') {
                            // Try to get screen resolution from window object
                            const width = window.screen.width;
                            const height = window.screen.height;
                            document.getElementById('gpu-resolution').textContent = width && height ? `${width} x ${height}` : 'Unknown';
                        }
                    }
                } catch (error) {
                    console.error('Error updating GPU data:', error);
                }
            }

            // Get real Memory data updates
            async function updateMemoryData() {
                try {
                    // Get real memory data from the Electron API
                    const memoryInfo = await window.electronAPI.get_memory_usage();
                    console.log("Memory info received:", memoryInfo);

                    // Extract values from the real data
                    // Convert bytes to GB (1 GB = 1024^3 bytes)
                    const bytesToGB = (bytes) => (bytes / (1024 * 1024 * 1024)).toFixed(1);

                    const memoryTotal = memoryInfo.total ? bytesToGB(memoryInfo.total) : 0;
                    const memoryUsed = memoryInfo.used ? bytesToGB(memoryInfo.used) : 0;
                    const memoryAvailable = memoryInfo.free ? bytesToGB(memoryInfo.free) : 0;
                    const memoryUsage = memoryInfo.usedPercentage || Math.round((memoryInfo.used / memoryInfo.total) * 100) || 0;

                    // Update gauge values
                    updateGauge(gauges.memoryUsage, memoryUsage);
                    updateGauge(gauges.memoryUsed, (parseFloat(memoryUsed) / parseFloat(memoryTotal)) * 100);
                    updateGauge(gauges.memoryAvailable, (parseFloat(memoryAvailable) / parseFloat(memoryTotal)) * 100);

                    // Update text values
                    document.getElementById('memory-usage-value').textContent = `${Math.round(memoryUsage)}%`;
                    document.getElementById('memory-used-value').textContent = `${memoryUsed} GB`;
                    document.getElementById('memory-available-value').textContent = `${memoryAvailable} GB`;

                    // Update line chart
                    updateLineChart(charts.memoryHistory, memoryUsage);

                    // Update Memory details (only once)
                    if (document.getElementById('memory-total').textContent === 'Loading...') {
                        document.getElementById('memory-total').textContent = `${memoryTotal} GB`;

                        // We don't have these details from the API, so use defaults or system info
                        const systemInfo = await window.electronAPI.getSystemInfo();
                        if (systemInfo && systemInfo.memLayout && systemInfo.memLayout.length > 0) {
                            const memType = systemInfo.memLayout[0].type || 'Unknown';
                            const memSpeed = systemInfo.memLayout[0].clockSpeed || 'Unknown';
                            const memSlots = systemInfo.memLayout.length || 'Unknown';

                            document.getElementById('memory-type').textContent = memType;
                            document.getElementById('memory-speed').textContent = memSpeed ? `${memSpeed} MHz` : 'Unknown';
                            document.getElementById('memory-slots').textContent = `${memSlots} (used)`;
                        } else {
                            document.getElementById('memory-type').textContent = 'Unknown';
                            document.getElementById('memory-speed').textContent = 'Unknown';
                            document.getElementById('memory-slots').textContent = 'Unknown';
                        }
                    }
                } catch (error) {
                    console.error('Error updating Memory data:', error);
                }
            }

            // Storage and Network data update functions have been removed

            // Function to update all hardware data
            async function updateAllData() {
                try {
                    // Update all components with real data
                    // Use Promise.all to run updates in parallel for better performance
                    await Promise.all([
                        updateCPUData(),
                        updateGPUData(),
                        updateMemoryData()
                        // Storage and Network updates have been removed
                    ]);
                } catch (error) {
                    console.error('Error updating hardware data:', error);
                }
            }

            // Initial update
            updateAllData();

            // Update every 2 seconds (default)
            let updateInterval = 2000;
            let updateIntervalId = setInterval(updateAllData, updateInterval);

            // Handle refresh rate changes
            const refreshRateSelect = document.getElementById('refresh-rate');
            if (refreshRateSelect) {
                refreshRateSelect.addEventListener('change', (e) => {
                    updateInterval = parseInt(e.target.value);
                    console.log(`Refresh rate changed to ${updateInterval}ms`);

                    // Clear the existing interval and set a new one
                    clearInterval(updateIntervalId);
                    updateIntervalId = setInterval(updateAllData, updateInterval);
                });
            }

            // Listen for storage events to detect accent color changes
            window.addEventListener('storage', (event) => {
                if (event.key === 'accentColor') {
                    console.log('Accent color changed in another window, updating...');
                    applyAccentColor();

                    // Reinitialize charts with new colors
                    // This is a simplified approach - in a production app, you might want to
                    // update the chart colors without recreating them
                    updateAllData();
                }
            });

            // Update component status indicators based on real data
            function updateComponentStatus(componentId, value, warningThreshold = 70, criticalThreshold = 90) {
                const statusIndicator = document.querySelector(`#${componentId}-view .status-indicator`);
                const statusText = document.querySelector(`#${componentId}-view .status-text`);

                if (!statusIndicator || !statusText) return;

                // Remove all status classes
                statusIndicator.classList.remove('good', 'warning', 'critical');

                // Set status based on value
                if (value >= criticalThreshold) {
                    statusIndicator.classList.add('critical');
                    statusText.textContent = 'Critical';
                } else if (value >= warningThreshold) {
                    statusIndicator.classList.add('warning');
                    statusText.textContent = 'Warning';
                } else {
                    statusIndicator.classList.add('good');
                    statusText.textContent = 'Good';
                }
            }
        });
    </script>
</body>
</html>
