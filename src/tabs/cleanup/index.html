<div class="tab-header">
    <div>
        <h1><i class="fas fa-broom"></i> Advanced System Cleanup</h1>
        <p>Professional-grade system optimization and cleanup tools</p>
    </div>
    <div>
    </div>
</div>

<div class="plugin-warning">
    <i class="fas fa-exclamation-triangle"></i>
    <span><strong>Disclaimer:</strong> System cleanup operations permanently delete files and data. Always ensure you have backups of important data. <strong>System restart may be required</strong> after cleanup.</span>
</div>

<div class="cleanup-content">


    <!-- Disk Space Overview -->
    <div class="disk-overview">
        <h3><i class="fas fa-chart-pie"></i> Disk Space Analysis</h3>
        <div class="disk-stats">
            <div class="disk-item">
                <div class="disk-header">
                    <div class="disk-label">Total Space</div>
                    <div class="disk-value" id="total-space">Loading...</div>
                </div>
                <div class="disk-bar">
                    <div class="disk-bar-fill" id="total-space-bar"></div>
                </div>
                <div class="disk-details" id="total-space-details">Calculating...</div>
            </div>
            <div class="disk-item">
                <div class="disk-header">
                    <div class="disk-label">Used Space</div>
                    <div class="disk-value" id="used-space">Loading...</div>
                </div>
                <div class="disk-bar">
                    <div class="disk-bar-fill" id="used-space-bar"></div>
                </div>
                <div class="disk-details" id="used-space-details">Calculating...</div>
            </div>
            <div class="disk-item">
                <div class="disk-header">
                    <div class="disk-label">Free Space</div>
                    <div class="disk-value" id="free-space">Loading...</div>
                </div>
                <div class="disk-bar">
                    <div class="disk-bar-fill" id="free-space-bar"></div>
                </div>
                <div class="disk-details" id="free-space-details">Calculating...</div>
            </div>

        </div>
    </div>

    <!-- Cleanup Categories Section -->
    <div class="cleanup-categories">
        <div class="categories-header">
            <h3><i class="fas fa-list-check"></i> Cleanup Categories</h3>
            <div class="category-controls">
                <button class="btn btn-sm btn-secondary" onclick="selectAllCategories()">
                    <i class="fas fa-check-double"></i> Select All
                </button>
                <button class="btn btn-sm btn-secondary" onclick="deselectAllCategories()">
                    <i class="fas fa-times"></i> Deselect All
                </button>

            </div>
        </div>

        <div class="categories-grid">
            <!-- Temporary Files -->
            <div class="category-card" data-category="temp">
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-temp" checked>
                    <label for="cat-temp"></label>
                </div>
                <div class="category-icon">
                    <i class="fas fa-file-alt"></i>
                </div>
                <div class="category-info">
                    <h4>Temporary Files</h4>
                    <p>System and user temp files, cache data</p>
                    <div class="category-size" id="temp-size">Ready to clean</div>
                </div>
                <div class="category-status" id="temp-status">
                    <i class="fas fa-clock"></i>
                </div>
            </div>

            <!-- System Cache -->
            <div class="category-card" data-category="cache">
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-cache" checked>
                    <label for="cat-cache"></label>
                </div>
                <div class="category-icon">
                    <i class="fas fa-database"></i>
                </div>
                <div class="category-info">
                    <h4>System Cache</h4>
                    <p>Prefetch, font cache, thumbnail cache</p>
                    <div class="category-size" id="cache-size">Ready to clean</div>
                </div>
                <div class="category-status" id="cache-status">
                    <i class="fas fa-clock"></i>
                </div>
            </div>

            <!-- Browser Data -->
            <div class="category-card" data-category="browser">
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-browser">
                    <label for="cat-browser"></label>
                </div>
                <div class="category-icon">
                    <i class="fas fa-globe"></i>
                </div>
                <div class="category-info">
                    <h4>Browser Data</h4>
                    <p>Cache, cookies, history, downloads</p>
                    <div class="category-size" id="browser-size">Ready to clean</div>
                </div>
                <div class="category-status" id="browser-status">
                    <i class="fas fa-clock"></i>
                </div>
            </div>

            <!-- Windows Update -->
            <div class="category-card" data-category="updates">
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-updates" checked>
                    <label for="cat-updates"></label>
                </div>
                <div class="category-icon">
                    <i class="fas fa-download"></i>
                </div>
                <div class="category-info">
                    <h4>Windows Update</h4>
                    <p>Update cache, installation files</p>
                    <div class="category-size" id="updates-size">Ready to clean</div>
                </div>
                <div class="category-status" id="updates-status">
                    <i class="fas fa-clock"></i>
                </div>
            </div>

            <!-- System Logs -->
            <div class="category-card" data-category="logs">
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-logs">
                    <label for="cat-logs"></label>
                </div>
                <div class="category-icon">
                    <i class="fas fa-file-text"></i>
                </div>
                <div class="category-info">
                    <h4>System Logs</h4>
                    <p>Event logs, error reports, crash dumps</p>
                    <div class="category-size" id="logs-size">Ready to clean</div>
                </div>
                <div class="category-status" id="logs-status">
                    <i class="fas fa-clock"></i>
                </div>
            </div>

            <!-- Recycle Bin -->
            <div class="category-card" data-category="recycle">
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-recycle">
                    <label for="cat-recycle"></label>
                </div>
                <div class="category-icon">
                    <i class="fas fa-trash"></i>
                </div>
                <div class="category-info">
                    <h4>Recycle Bin</h4>
                    <p>Permanently delete recycled files</p>
                    <div class="category-size" id="recycle-size">Ready to clean</div>
                </div>
                <div class="category-status" id="recycle-status">
                    <i class="fas fa-clock"></i>
                </div>
            </div>

            <!-- Registry Cleanup -->
            <div class="category-card" data-category="registry">
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-registry">
                    <label for="cat-registry"></label>
                </div>
                <div class="category-icon">
                    <i class="fas fa-cogs"></i>
                </div>
                <div class="category-info">
                    <h4>Registry Cleanup</h4>
                    <p>Invalid entries, broken references</p>
                    <div class="category-size" id="registry-size">Ready to clean</div>
                </div>
                <div class="category-status" id="registry-status">
                    <i class="fas fa-clock"></i>
                </div>
            </div>

            <!-- Memory Dumps -->
            <div class="category-card" data-category="dumps">
                <div class="category-checkbox">
                    <input type="checkbox" id="cat-dumps">
                    <label for="cat-dumps"></label>
                </div>
                <div class="category-icon">
                    <i class="fas fa-bug"></i>
                </div>
                <div class="category-info">
                    <h4>Memory Dumps</h4>
                    <p>Crash dumps, minidumps, debug files</p>
                    <div class="category-size" id="dumps-size">Ready to clean</div>
                </div>
                <div class="category-status" id="dumps-status">
                    <i class="fas fa-clock"></i>
                </div>
            </div>
        </div>

        <!-- Cleanup Actions -->
        <div class="cleanup-actions">
            <div class="cleanup-summary">
                <div class="summary-item">
                    <span class="summary-label">Selected Categories:</span>
                    <span class="summary-value" id="selected-count">0</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Estimated Space to Free:</span>
                    <span class="summary-value" id="estimated-space">0 MB</span>
                </div>
            </div>
            <div class="action-buttons">
                <button class="btn btn-primary btn-large" onclick="startAdvancedCleanup()" id="cleanup-btn">
                    <i class="fas fa-broom"></i> Start Cleanup
                </button>

                <button class="btn btn-secondary" onclick="openDiskCleanup()">
                    <i class="fas fa-external-link-alt"></i> Windows Cleanup
                </button>
                <button class="btn btn-secondary" onclick="showCleanupSettings()">
                    <i class="fas fa-cog"></i> Settings
                </button>
            </div>
        </div>
    </div>



    <!-- Progress Section -->
    <div class="cleanup-progress" id="cleanup-progress" style="display: none;">
        <div class="progress-card">
            <div class="progress-header">
                <h3><i class="fas fa-spinner fa-spin"></i> Cleanup in Progress</h3>
                <div class="progress-stats">
                    <span class="progress-percentage" id="progress-percentage">0%</span>
                    <span class="progress-eta" id="progress-eta">Calculating...</span>
                </div>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar">
                    <div class="progress-bar-fill" id="progress-bar-fill"></div>
                </div>
                <div class="progress-text" id="progress-text">Preparing cleanup...</div>
            </div>
            <div class="progress-details">
                <div class="current-operation" id="current-operation">Initializing...</div>
                <div class="progress-log" id="progress-log">
                    <div class="log-entry">Starting cleanup process...</div>
                </div>
            </div>
            <div class="progress-actions">
                <button class="btn btn-secondary" onclick="pauseCleanup()" id="pause-btn">
                    <i class="fas fa-pause"></i> Pause
                </button>
                <button class="btn btn-danger" onclick="cancelCleanup()" id="cancel-btn">
                    <i class="fas fa-stop"></i> Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Enhanced Results Section -->
    <div class="results-section" id="results-section" style="display: none;">
        <div class="results-header">
            <h3><i class="fas fa-check-circle"></i> Cleanup Complete</h3>
            <div class="results-timestamp" id="results-timestamp"></div>
        </div>

        <div class="results-container">
            <!-- Summary Cards -->
            <div class="results-summary">
                <div class="result-card">
                    <div class="result-icon success">
                        <i class="fas fa-file-alt"></i>
                    </div>
                    <div class="result-info">
                        <span class="result-value" id="files-cleaned">0</span>
                        <span class="result-label">Files Cleaned</span>
                    </div>
                </div>
                <div class="result-card">
                    <div class="result-icon primary">
                        <i class="fas fa-hdd"></i>
                    </div>
                    <div class="result-info">
                        <span class="result-value" id="space-freed">0 MB</span>
                        <span class="result-label">Space Freed</span>
                    </div>
                </div>
                <div class="result-card">
                    <div class="result-icon info">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="result-info">
                        <span class="result-value" id="time-taken">0s</span>
                        <span class="result-label">Time Taken</span>
                    </div>
                </div>
                <div class="result-card">
                    <div class="result-icon warning">
                        <i class="fas fa-folder"></i>
                    </div>
                    <div class="result-info">
                        <span class="result-value" id="categories-cleaned">0</span>
                        <span class="result-label">Categories</span>
                    </div>
                </div>
            </div>

            <!-- Detailed Results -->
            <div class="detailed-results">
                <h4><i class="fas fa-list"></i> Detailed Results</h4>
                <div class="results-table" id="detailed-results-table">
                    <!-- Dynamic content will be inserted here -->
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="results-actions">
                <button class="btn btn-primary" onclick="startAdvancedCleanup()" id="cleanup-again-btn">
                    <i class="fas fa-redo"></i> Clean Again
                </button>
                <button class="btn btn-secondary" onclick="exportResults()">
                    <i class="fas fa-download"></i> Export Report
                </button>
                <button class="btn btn-secondary" onclick="showCleanupHistory()">
                    <i class="fas fa-history"></i> View History
                </button>
                <button class="btn btn-secondary" onclick="openDiskCleanup()">
                    <i class="fas fa-external-link-alt"></i> Windows Cleanup
                </button>
            </div>
        </div>
    </div>

    <!-- Cleanup History Section -->
    <div class="history-section" id="history-section" style="display: none;">
        <div class="history-header">
            <h3><i class="fas fa-history"></i> Cleanup History</h3>
            <div class="history-controls">
                <button class="btn btn-sm btn-secondary" onclick="clearHistory()">
                    <i class="fas fa-trash"></i> Clear History
                </button>
                <button class="btn btn-sm btn-secondary" onclick="hideHistory()">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
        </div>
        <div class="history-content" id="history-content">
            <div class="history-empty">
                <i class="fas fa-clock"></i>
                <p>No cleanup history available</p>
            </div>
        </div>
    </div>

    <!-- Cleanup Settings Modal -->
    <div class="settings-modal" id="cleanup-settings-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-cog"></i> Cleanup Settings</h3>
                <button class="btn btn-sm btn-secondary" onclick="hideCleanupSettings()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <h4>Safety Settings</h4>
                    <label class="setting-item">
                        <input type="checkbox" id="confirm-before-delete" checked>
                        <span>Confirm before deleting files</span>
                    </label>
                    <label class="setting-item">
                        <input type="checkbox" id="skip-recent-files" checked>
                        <span>Skip recently modified files (24 hours)</span>
                    </label>
                    <label class="setting-item">
                        <input type="checkbox" id="create-restore-point">
                        <span>Create system restore point before cleanup</span>
                    </label>
                </div>
                <div class="setting-group">
                    <h4>Performance Settings</h4>
                    <label class="setting-item">
                        <span>Cleanup threads:</span>
                        <select id="cleanup-threads">
                            <option value="1" selected>1 (Safe)</option>
                            <option value="2">2 (Balanced)</option>
                            <option value="4">4 (Fast)</option>
                        </select>
                    </label>

                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="saveCleanupSettings()">
                    <i class="fas fa-save"></i> Save Settings
                </button>
                <button class="btn btn-secondary" onclick="resetCleanupSettings()">
                    <i class="fas fa-undo"></i> Reset to Defaults
                </button>
            </div>
        </div>
    </div>
</div>
